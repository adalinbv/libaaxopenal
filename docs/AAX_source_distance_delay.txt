Name

    AL_AAX_source_distance_delay

Contributors

    Erik Hofman

Contact

    Erik Hofman (erik.hofman 'at' adalin.com)

Status

    Complete

Dependencies

    This extension is written against the OpenAL 1.1 specification.

Overview

    This extension extends AL_EXT_source_distance_model.
    This extension allows each source to enable or disable distance delayed
    property changes that occur due to the maximum speed of sound. It provides
    a mechanism for applications to enable, or disable, distance delaying
    when specifying either the default distance model or for every source
    individually.

Issues

    Q: What is the default behavior?
    A: Distance delaying is disabled by default.

    Q: How is distance delaying controlled?
    A: By calling alEnable or alDisable with AL_DISTANCE_DELAY_AAX
       as the <target> parameter prior to setting the distance model.

    Q: What happens if there is an intentional jump in the distance between
       one or more sources and the listener.
    A: The implementation does not guess if such an event takes place.
       As a result the distance delay might get misaligned with the actual
       situation. It is up to the application to tell the implementation to
       re-initialize the distance delay parameters if such an event happens.

    Q: How do I tell the implementation to re-initialize the distance delay
       parameters?
    A: Distance delay is re-initialized by parsing AL_DISTANCE_DELAY_AAX
       as the <value> parameter when calling alSourcei or alSourceiv
       with AL_SOURCE_STATE as the <param> parameter.

New Procedures and Functions

    None.

New Tokens

    Accepted by the <target> parameter of alEnable, alDisable, and
    alIsEnabled and accepted by the <value> parameter of alSourcei or 
    alSourceiv when parsing AL_SOURCE_STATE as the <param> parameter.

        AL_DISTANCE_DELAY_AAX                   0x27001A

Additions to Specification

    Append Section 2.8 (Controlling AL Execution, p. 17)

    The table below specifies the acceptable target capabilities:

    Table 2.x: Context capability targets

    Name                      Description
    ------------------------  -----------------
    AL_DISTANCE_DELAY_AAX     Enables delayed source property changes as
                              a result of the maximum speed of sound.
                              (default is disabled)


    Add Section 3.5.3 (Distance Dependent Property Changes), p. 30

    In reality property changes at the source location take time to reach
    the listener because the speed of sound has a maximum value. The time
    it takes to reach the listener is dependent of the speed of sound and
    the distance between the source and the listener.

    Actually the time it takes to reach the listener also depends on the
    motion of the medium (usually air) between the source and the listener
    but that is not taken into account since it's effect is normally very small.

    SS: AL_SPEED_OF_SOUND - speed of sound (default value 343.3)
    vsl: source-to-listener vector

    dist: distance between the source and the listener.
    delay: distance delay in seconds.

    Distance Delay Calculation:

    dist = Mag(vsl);
    delay = dist/SS;


    Modify Section 4.3.2 (Source Attributes)

    (add after subsection Distance Model Attributes, p. 37)

    Distance Delay Attributes
 
    Table 4.x: SOURCE_STATE Attribute
    Name           Signature   Values                 Default
    ------------   ---------   ---------------------  ---------------------
    SOURCE_STATE   i, iv       AL_DISTANCE_DELAY_AAX  AL_DISTANCE_DELAY_AAX

    Description: The application can trigger re-initialization of distance
    delay properties by using alSource with parameter name AL_SOURCE_STATE
    and value name AL_DISTANCE_DELAY_AAX. This is required every time the
    source or the listener makes a sudden, non continuous, jump from one
    position to another. This is a one time event.


Errors

    None.
